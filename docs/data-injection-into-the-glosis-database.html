<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Data injection into the GloSIS database | Soil Data Injection with Shiny and PostgreSQL</title>
  <meta name="description" content="<p>This is a bookdown with the instructions to use the Glosis-shiny app to inject data into postgres.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Data injection into the GloSIS database | Soil Data Injection with Shiny and PostgreSQL" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This is a bookdown with the instructions to use the Glosis-shiny app to inject data into postgres.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  <meta name="github-repo" content="rstudio/Glosis_shiny" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Data injection into the GloSIS database | Soil Data Injection with Shiny and PostgreSQL" />
  
  <meta name="twitter:description" content="<p>This is a bookdown with the instructions to use the Glosis-shiny app to inject data into postgres.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  

<meta name="author" content="Luis Rodríguez Lado, Eloi Ribeiro, Marcos Angelini" />


<meta name="date" content="2025-03-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-preparation.html"/>
<link rel="next" href="visualization.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> <strong>Introduction</strong></a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#system-requirements"><i class="fa fa-check"></i><b>1.1</b> System Requirements</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="installation-and-setup.html"><a href="installation-and-setup.html"><i class="fa fa-check"></i><b>2</b> <strong>Installation and Setup</strong></a>
<ul>
<li class="chapter" data-level="2.1" data-path="installation-and-setup.html"><a href="installation-and-setup.html#installing-docker-desktop"><i class="fa fa-check"></i><b>2.1</b> Installing Docker Desktop</a></li>
<li class="chapter" data-level="2.2" data-path="installation-and-setup.html"><a href="installation-and-setup.html#setting-up-the-glosis-database-and-shiny-app"><i class="fa fa-check"></i><b>2.2</b> Setting Up the GloSIS Database and Shiny App</a></li>
<li class="chapter" data-level="2.3" data-path="installation-and-setup.html"><a href="installation-and-setup.html#deploying-services"><i class="fa fa-check"></i><b>2.3</b> Deploying Services</a></li>
<li class="chapter" data-level="2.4" data-path="installation-and-setup.html"><a href="installation-and-setup.html#accessing-the-services"><i class="fa fa-check"></i><b>2.4</b> Accessing the Services</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="database-postgresql-database-configuration.html"><a href="database-postgresql-database-configuration.html"><i class="fa fa-check"></i><b>3</b> <strong>Database PostgreSQL Database Configuration</strong></a>
<ul>
<li class="chapter" data-level="3.1" data-path="database-postgresql-database-configuration.html"><a href="database-postgresql-database-configuration.html#postgresql-database-configuration"><i class="fa fa-check"></i><b>3.1</b> PostgreSQL Database Configuration</a></li>
<li class="chapter" data-level="3.2" data-path="database-postgresql-database-configuration.html"><a href="database-postgresql-database-configuration.html#database-credentials"><i class="fa fa-check"></i><b>3.2</b> Database Credentials</a></li>
<li class="chapter" data-level="3.3" data-path="database-postgresql-database-configuration.html"><a href="database-postgresql-database-configuration.html#database-schema"><i class="fa fa-check"></i><b>3.3</b> Database Schema</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-preparation.html"><a href="data-preparation.html"><i class="fa fa-check"></i><b>4</b> <strong>Data preparation</strong></a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-preparation.html"><a href="data-preparation.html#understanding-the-xlsx-template"><i class="fa fa-check"></i><b>4.1</b> Understanding the XLSX Template</a></li>
<li class="chapter" data-level="4.2" data-path="data-preparation.html"><a href="data-preparation.html#plot-data-sheet"><i class="fa fa-check"></i><b>4.2</b> Plot Data Sheet</a></li>
<li class="chapter" data-level="4.3" data-path="data-preparation.html"><a href="data-preparation.html#specimen-data-sheet"><i class="fa fa-check"></i><b>4.3</b> Specimen Data Sheet</a></li>
<li class="chapter" data-level="4.4" data-path="data-preparation.html"><a href="data-preparation.html#procedures-sheet"><i class="fa fa-check"></i><b>4.4</b> Procedures Sheet</a></li>
<li class="chapter" data-level="4.5" data-path="data-preparation.html"><a href="data-preparation.html#codelist-sheet"><i class="fa fa-check"></i><b>4.5</b> Codelist Sheet</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-injection-into-the-glosis-database.html"><a href="data-injection-into-the-glosis-database.html"><i class="fa fa-check"></i><b>5</b> <strong>Data injection into the GloSIS database</strong></a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-injection-into-the-glosis-database.html"><a href="data-injection-into-the-glosis-database.html#create-a-new-database."><i class="fa fa-check"></i><b>5.1</b> Create a new database.</a></li>
<li class="chapter" data-level="5.2" data-path="data-injection-into-the-glosis-database.html"><a href="data-injection-into-the-glosis-database.html#upload-data-to-inject."><i class="fa fa-check"></i><b>5.2</b> Upload data to inject.</a></li>
<li class="chapter" data-level="5.3" data-path="data-injection-into-the-glosis-database.html"><a href="data-injection-into-the-glosis-database.html#delete-an-existing-database.-processing-database.-.illustration"><i class="fa fa-check"></i><b>5.3</b> Delete an existing database. {#processing-database. .#illustration}</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="visualization.html"><a href="visualization.html"><i class="fa fa-check"></i><b>6</b> <strong>Visualization</strong></a>
<ul>
<li class="chapter" data-level="6.1" data-path="visualization.html"><a href="visualization.html#view-data-on-the-dashboard"><i class="fa fa-check"></i><b>6.1</b> <strong>View Data on the Dashboard</strong></a></li>
<li class="chapter" data-level="6.2" data-path="visualization.html"><a href="visualization.html#view-data-on-the-data-viewer-app"><i class="fa fa-check"></i><b>6.2</b> <strong>View data on the Data Viewer App</strong></a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Soil Data Injection with Shiny and PostgreSQL</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-injection-into-the-glosis-database" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">5</span> <strong>Data injection into the GloSIS database</strong><a href="data-injection-into-the-glosis-database.html#data-injection-into-the-glosis-database" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="create-a-new-database." class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Create a new database.<a href="data-injection-into-the-glosis-database.html#create-a-new-database." class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Open the <code>glosis-shiny</code> application in your web browser at <code>http://localhost:3838/iso28258/</code>. This site will display the main window of the application.</p>
<p>The window contains a dropdown menu listing all existing databases in the system (empty if running for the first time), a button to connect to the selected database, a button to create a new database, and a Remove button to delete an existing database.</p>
<p>The first step is to create a new database to store the soil data. The <code>New Database</code> button is intended for this task (Figure <a href="data-injection-into-the-glosis-database.html#fig:newdb">5.1</a>). When clicked, a dialog window will pop up asking for the database name. Enter a name in the field and click the <code>Confirm</code> button. A message will appear indicating that the database has been successfully created. In case the database already exists, the message will also indicates it. The new database will be stored in the <code>data</code> folder within the working directory and will become active in the <code>Select Database</code> dropdown menu.</p>
<p>The first step is to create a new database to store the soil data using the <code>New Database</code> button (Figure <span class="citation">(<a href="#ref-ref" role="doc-biblioref"><strong>ref?</strong></a>)</span>(fig:newdb)). A dialog window will pop up asking for the database name. Enter a name in the field and click the <code>Confirm</code> button. A message will appear indicating that the database has been successfully created. If the database already exists, the message will indicate this as well.</p>
<p>The new database will be stored in the <code>data</code> folder within the working directory and will become available in the <code>Select Database</code> dropdown menu.</p>
<div class="figure"><span style="display:block;" id="fig:newdb"></span>
<img src="figures/newdb.png" alt="Creation of a new database." width="100%" />
<p class="caption">
Figure 5.1: Creation of a new database.
</p>
</div>
</div>
<div id="upload-data-to-inject." class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Upload data to inject.<a href="data-injection-into-the-glosis-database.html#upload-data-to-inject." class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>At this point, the main body of the application will show the column names for each table but the registers are still empty. It the database has previous data, the tables will show the already inserted data. The data of the <code>.xlsx</code> will be transferred to the new created database. Select the database to be filled in the <code>Select Database</code> dropdown menu and click on the <code>Connect</code> buttom. A new section <code>ÌNJECT DATA (.xlsx)</code> will appear in the sidebar. This includes a <code>Browse</code> button to select the <code>.xlsx</code> data to insert into de database.</p>
<p>To inject new data, click on the</p>
<p>After uploading the <code>.xlsx</code> file a message will appear indicating that the data is being processed for its inclusion in the database (Figure <a href="data-injection-into-the-glosis-database.html#fig:processing">5.2</a>). The database will show the results for each table when finished.</p>
<div class="figure"><span style="display:block;" id="fig:processing"></span>
<img src="figures/processing.png" alt="Information in the Specimen Data sheet." width="100%" />
<p class="caption">
Figure 5.2: Information in the Specimen Data sheet.
</p>
</div>
</div>
<div id="delete-an-existing-database.-processing-database.-.illustration" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Delete an existing database. {#processing-database. .#illustration}<a href="data-injection-into-the-glosis-database.html#delete-an-existing-database.-processing-database.-.illustration" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <code>Specimen Data</code> sheet (Figure <a href="data-injection-into-the-glosis-database.html#fig:specimen-tab">5.3</a>) contains detailed soil information at the sample level, including data from each individual horizon or layer, their boundaries, and associated soil properties derived from laboratory analyses.</p>
<p>For each sampled horizon or layer, the sheet includes unique identifiers for the profile, element, and specimen (<code>profile_code</code>,<code>element_code</code>,<code>specimen_code</code>). These identifiers should follow a structured naming convention, typically consisting of the soil profile name followed by a numeric sequence corresponding to the sampled horizon or layer. However, they can be freely named as long as they remain unique. The sheet also specifies the type of observation (<code>Layer</code>or <code>Horizon</code>), as well as the upper and lower depth boundaries (<code>upper_depth</code>, <code>lower_depth</code>). A <code>Horizon</code> refers to a genetically classified horizon in the soil profile, while a <code>Layer</code> represents a soil sample collected based on alternative criteria, such as a fixed depth interval rather than pedogenetic origin.</p>
<p>Additionally, the sheet records the corresponding physical and chemical values of soil properties obtained from laboratory analyses, including pH, Soil Organic Carbon, clay content, and other relevant properties.</p>
<div class="figure"><span style="display:block;" id="fig:specimen-tab"></span>
<img src="figures/specimen_tab.png" alt="Information in the Specimen Data sheet." width="100%" />
<p class="caption">
Figure 5.3: Information in the Specimen Data sheet.
</p>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-preparation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="visualization.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
