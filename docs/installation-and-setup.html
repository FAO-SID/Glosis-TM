<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Installation and Setup | Soil Data Injection with Shiny and PostgreSQL</title>
  <meta name="description" content="<p>This is a bookdown with the instructions to use the Glosis-shiny app to inject data into postgres.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Installation and Setup | Soil Data Injection with Shiny and PostgreSQL" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This is a bookdown with the instructions to use the Glosis-shiny app to inject data into postgres.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  <meta name="github-repo" content="FAO-SID/Glosis-TM" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Installation and Setup | Soil Data Injection with Shiny and PostgreSQL" />
  
  <meta name="twitter:description" content="<p>This is a bookdown with the instructions to use the Glosis-shiny app to inject data into postgres.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  

<meta name="author" content="Luis RodrÃ­guez Lado, Eloi Ribeiro, Marcos Angelini" />


<meta name="date" content="2025-03-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="glosis-database.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> <strong>Introduction</strong></a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#system-requirements"><i class="fa fa-check"></i><b>1.1</b> System Requirements</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="installation-and-setup.html"><a href="installation-and-setup.html"><i class="fa fa-check"></i><b>2</b> <strong>Installation and Setup</strong></a>
<ul>
<li class="chapter" data-level="2.1" data-path="installation-and-setup.html"><a href="installation-and-setup.html#installing-docker-desktop"><i class="fa fa-check"></i><b>2.1</b> Installing Docker Desktop</a></li>
<li class="chapter" data-level="2.2" data-path="installation-and-setup.html"><a href="installation-and-setup.html#setting-up-the-glosis-database-and-shiny-app"><i class="fa fa-check"></i><b>2.2</b> Setting Up the GloSIS Database and Shiny App</a></li>
<li class="chapter" data-level="2.3" data-path="installation-and-setup.html"><a href="installation-and-setup.html#deploying-services"><i class="fa fa-check"></i><b>2.3</b> Deploying Services</a></li>
<li class="chapter" data-level="2.4" data-path="installation-and-setup.html"><a href="installation-and-setup.html#accessing-the-services"><i class="fa fa-check"></i><b>2.4</b> Accessing the Services</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="glosis-database.html"><a href="glosis-database.html"><i class="fa fa-check"></i><b>3</b> <strong>GloSIS Database</strong></a>
<ul>
<li class="chapter" data-level="3.1" data-path="glosis-database.html"><a href="glosis-database.html#glosis-database-configuration"><i class="fa fa-check"></i><b>3.1</b> GloSIS Database Configuration</a></li>
<li class="chapter" data-level="3.2" data-path="glosis-database.html"><a href="glosis-database.html#database-credentials"><i class="fa fa-check"></i><b>3.2</b> Database Credentials</a></li>
<li class="chapter" data-level="3.3" data-path="glosis-database.html"><a href="glosis-database.html#database-schema"><i class="fa fa-check"></i><b>3.3</b> Database Schema</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-preparation.html"><a href="data-preparation.html"><i class="fa fa-check"></i><b>4</b> <strong>Data preparation</strong></a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-preparation.html"><a href="data-preparation.html#understanding-the-xlsx-template"><i class="fa fa-check"></i><b>4.1</b> Understanding the XLSX Template</a></li>
<li class="chapter" data-level="4.2" data-path="data-preparation.html"><a href="data-preparation.html#plot-data-sheet"><i class="fa fa-check"></i><b>4.2</b> Plot Data Sheet</a></li>
<li class="chapter" data-level="4.3" data-path="data-preparation.html"><a href="data-preparation.html#specimen-data-sheet"><i class="fa fa-check"></i><b>4.3</b> Specimen Data Sheet</a></li>
<li class="chapter" data-level="4.4" data-path="data-preparation.html"><a href="data-preparation.html#procedures-sheet"><i class="fa fa-check"></i><b>4.4</b> Procedures Sheet</a></li>
<li class="chapter" data-level="4.5" data-path="data-preparation.html"><a href="data-preparation.html#codelist-sheet"><i class="fa fa-check"></i><b>4.5</b> Codelist Sheet</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-injection-into-the-glosis-database.html"><a href="data-injection-into-the-glosis-database.html"><i class="fa fa-check"></i><b>5</b> <strong>Data injection into the GloSIS database</strong></a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-injection-into-the-glosis-database.html"><a href="data-injection-into-the-glosis-database.html#create-a-new-database."><i class="fa fa-check"></i><b>5.1</b> Create a new database.</a></li>
<li class="chapter" data-level="5.2" data-path="data-injection-into-the-glosis-database.html"><a href="data-injection-into-the-glosis-database.html#data-injection."><i class="fa fa-check"></i><b>5.2</b> Data injection.</a></li>
<li class="chapter" data-level="5.3" data-path="data-injection-into-the-glosis-database.html"><a href="data-injection-into-the-glosis-database.html#delete-an-existing-database."><i class="fa fa-check"></i><b>5.3</b> Delete an existing database.</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="visualization.html"><a href="visualization.html"><i class="fa fa-check"></i><b>6</b> <strong>Visualization</strong></a>
<ul>
<li class="chapter" data-level="6.1" data-path="visualization.html"><a href="visualization.html#view-data-on-the-dashboard"><i class="fa fa-check"></i><b>6.1</b> View Data on the Dashboard</a></li>
<li class="chapter" data-level="6.2" data-path="visualization.html"><a href="visualization.html#view-data-on-the-data-viewer-app"><i class="fa fa-check"></i><b>6.2</b> View data on the Data Viewer App</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Soil Data Injection with Shiny and PostgreSQL</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="installation-and-setup" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">2</span> <strong>Installation and Setup</strong><a href="installation-and-setup.html#installation-and-setup" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This section explains how to set up the necessary environment to run the <strong>GloSIS soil data injection system</strong>, including <strong>Docker</strong>, <strong>PostgreSQL with PostGIS</strong>, and the <strong>Shiny-based data injection application</strong>. The installation process is fully containerized using Docker, which means all dependencies and configurations are pre-defined and work consistently across different systems.</p>
<p>The system consists of two main components: a <strong>PostgreSQL database with PostGIS</strong>, which stores the soil data following the <strong>ISO 28258 (GloSIS) standard</strong>, and a <strong>Shiny web application</strong>, which allows users to inject structured Excel files into the database. These components are deployed together using <strong>Docker Compose</strong>, making the setup process straightforward and ensuring everything runs in a controlled environment.</p>
<hr />
<div id="installing-docker-desktop" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Installing Docker Desktop<a href="installation-and-setup.html#installing-docker-desktop" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Before proceeding with the installation, Docker Desktop must be installed. Docker is a tool that allows applications to run inside containers, ensuring they work the same way on any system. To install it, go to the official <a href="https://docs.docker.com/desktop/setup/install/windows-install/">Docker Desktop website</a> and download the version appropriate for your operating system.</p>
<p>After installation, start <strong>Docker Desktop</strong> and verify that it is running by opening a terminal (or command prompt) and running:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="installation-and-setup.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> <span class="at">--version</span></span></code></pre></div>
<p>If the installation was successful, you should see an output displaying the installed version of Docker, such as:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="installation-and-setup.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Docker</span> version 20.10.21, build baeda1f</span></code></pre></div>
<p>If Docker is running correctly, you are now ready to set up the GloSIS services.</p>
</div>
<div id="setting-up-the-glosis-database-and-shiny-app" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Setting Up the GloSIS Database and Shiny App<a href="installation-and-setup.html#setting-up-the-glosis-database-and-shiny-app" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The database and the Shiny app are deployed using Docker Compose, which automates the process of downloading and running multiple containers. Instead of installing PostgreSQL, PostGIS, and the Shiny app separately, all configurations are predefined in a docker-compose.yml file, which allows both services to start together with a single command.</p>
<p>The docker-compose.yml file defines the two services required for this project:</p>
<p>The PostgreSQL database, which includes PostGIS extensions and is configured to store soil data.
The Shiny web application, which provides a graphical interface for injecting data into the database.
Below is the content of docker-compose.yml, which you will use to deploy the system:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb3-1"><a href="installation-and-setup.html#cb3-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-2"><a href="installation-and-setup.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb3-3"><a href="installation-and-setup.html#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">postgis</span><span class="kw">:</span></span>
<span id="cb3-4"><a href="installation-and-setup.html#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> luislado/glosis-postgis:latest</span><span class="co">  # Pre-configured PostgreSQL database</span></span>
<span id="cb3-5"><a href="installation-and-setup.html#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">container_name</span><span class="kw">:</span><span class="at"> glosis-db</span></span>
<span id="cb3-6"><a href="installation-and-setup.html#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">restart</span><span class="kw">:</span><span class="at"> always</span></span>
<span id="cb3-7"><a href="installation-and-setup.html#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb3-8"><a href="installation-and-setup.html#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">DB_HOST</span><span class="kw">:</span><span class="at"> postgis</span></span>
<span id="cb3-9"><a href="installation-and-setup.html#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">DB_PORT</span><span class="kw">:</span><span class="at"> </span><span class="dv">5432</span></span>
<span id="cb3-10"><a href="installation-and-setup.html#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">DB_NAME</span><span class="kw">:</span><span class="at"> postgres</span></span>
<span id="cb3-11"><a href="installation-and-setup.html#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">DB_USER</span><span class="kw">:</span><span class="at"> postgres</span></span>
<span id="cb3-12"><a href="installation-and-setup.html#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">DB_PASSWORD</span><span class="kw">:</span><span class="at"> glosis</span></span>
<span id="cb3-13"><a href="installation-and-setup.html#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">POSTGRES_PASSWORD</span><span class="kw">:</span><span class="at"> glosis</span></span>
<span id="cb3-14"><a href="installation-and-setup.html#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb3-15"><a href="installation-and-setup.html#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;5442:5432&quot;</span><span class="co">  # Makes the database accessible from your machine</span></span>
<span id="cb3-16"><a href="installation-and-setup.html#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb3-17"><a href="installation-and-setup.html#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./data/postgis:/var/lib/postgresql/data</span><span class="co">  # Persistent database storage</span></span>
<span id="cb3-18"><a href="installation-and-setup.html#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./init-scripts:/docker-entrypoint-initdb.d</span><span class="co">  # Schema initialization scripts</span></span>
<span id="cb3-19"><a href="installation-and-setup.html#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb3-20"><a href="installation-and-setup.html#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> glosis-net</span></span>
<span id="cb3-21"><a href="installation-and-setup.html#cb3-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-22"><a href="installation-and-setup.html#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">shinyapp</span><span class="kw">:</span></span>
<span id="cb3-23"><a href="installation-and-setup.html#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> luislado/glosis-shiny:latest</span><span class="co">  # Shiny app for data injection</span></span>
<span id="cb3-24"><a href="installation-and-setup.html#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">container_name</span><span class="kw">:</span><span class="at"> glosis-shiny</span></span>
<span id="cb3-25"><a href="installation-and-setup.html#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">restart</span><span class="kw">:</span><span class="at"> always</span></span>
<span id="cb3-26"><a href="installation-and-setup.html#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb3-27"><a href="installation-and-setup.html#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">USER</span><span class="kw">:</span><span class="at"> shiny</span></span>
<span id="cb3-28"><a href="installation-and-setup.html#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">PASSWORD</span><span class="kw">:</span><span class="at"> shiny</span></span>
<span id="cb3-29"><a href="installation-and-setup.html#cb3-29" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">DB_HOST</span><span class="kw">:</span><span class="at"> postgis</span></span>
<span id="cb3-30"><a href="installation-and-setup.html#cb3-30" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">DB_PORT</span><span class="kw">:</span><span class="at"> </span><span class="dv">5442</span></span>
<span id="cb3-31"><a href="installation-and-setup.html#cb3-31" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">DB_NAME</span><span class="kw">:</span><span class="at"> postgres</span></span>
<span id="cb3-32"><a href="installation-and-setup.html#cb3-32" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">DB_USER</span><span class="kw">:</span><span class="at"> postgres</span></span>
<span id="cb3-33"><a href="installation-and-setup.html#cb3-33" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">DB_PASSWORD</span><span class="kw">:</span><span class="at"> glosis</span></span>
<span id="cb3-34"><a href="installation-and-setup.html#cb3-34" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb3-35"><a href="installation-and-setup.html#cb3-35" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;3838:3838&quot;</span><span class="co">  # Allows access to the web interface</span></span>
<span id="cb3-36"><a href="installation-and-setup.html#cb3-36" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb3-37"><a href="installation-and-setup.html#cb3-37" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./init-scripts:/srv/shiny-server/init-scripts</span><span class="co">  # Shiny app scripts</span></span>
<span id="cb3-38"><a href="installation-and-setup.html#cb3-38" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">depends_on</span><span class="kw">:</span></span>
<span id="cb3-39"><a href="installation-and-setup.html#cb3-39" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> postgis</span><span class="co">  # Ensures PostgreSQL starts before the Shiny app</span></span>
<span id="cb3-40"><a href="installation-and-setup.html#cb3-40" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb3-41"><a href="installation-and-setup.html#cb3-41" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> glosis-net</span></span>
<span id="cb3-42"><a href="installation-and-setup.html#cb3-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-43"><a href="installation-and-setup.html#cb3-43" aria-hidden="true" tabindex="-1"></a><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb3-44"><a href="installation-and-setup.html#cb3-44" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">glosis-net</span><span class="kw">:</span></span>
<span id="cb3-45"><a href="installation-and-setup.html#cb3-45" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">driver</span><span class="kw">:</span><span class="at"> bridge</span></span>
<span id="cb3-46"><a href="installation-and-setup.html#cb3-46" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> glosis-net</span></span></code></pre></div>
<p>This configuration does several things. It creates a network (<code>glosis-net</code>) that allows both services to communicate. It ensures that the database (<code>glosis-db</code>) is available before starting the Shiny app (<code>glosis-shiny</code>). It also maps port 5442 for PostgreSQL, so it can be accessed from outside the container, and port 3838 for the Shiny app, allowing users to interact with it via a web browser.</p>
<p>Additionally, two new folder are created in you installation directory:
1. <code>/data/postgis</code> that will store the database outside the <code>glosis-db</code> container, and
2. <code>/init-scripts/</code> that stores the newest version of the GloSIS database schemas (<code>.sql</code>) and additional outputs from running the <code>glosis-shiny</code> application.</p>
<p>This ensures that both the database and outputs are stored outside the containers, preventing data loss when the system is restarted.</p>
</div>
<div id="deploying-services" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Deploying Services<a href="installation-and-setup.html#deploying-services" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Once the docker-compose.yml file is in place, you can proceed with launching the system.</p>
<p>First, open a terminal and navigate to the directory where you saved the docker-compose.yml file:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="installation-and-setup.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /path/to/docker-compose-directory</span></code></pre></div>
<p>Then, start the containers by running:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="installation-and-setup.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker-compose</span> up <span class="at">-d</span></span></code></pre></div>
<p>This command will:</p>
<ol style="list-style-type: decimal">
<li>Download the necessary container images (if they are not already present).</li>
<li>Create and run the PostgreSQL database and Shiny app.</li>
<li>Ensure that the services run in the background (<code>-d</code> flag for âdetached modeâ).</li>
</ol>
<p>The first time you run this command, the process may take a few minutes as Docker downloads the required images.</p>
<p>To check whether the containers are running correctly, open the Docker Desktop graphical interface (Figure <a href="installation-and-setup.html#fig:docker-desktop">2.1</a>).</p>
<div class="figure"><span style="display:block;" id="fig:docker-desktop"></span>
<img src="figures/docker_desktop.png" alt="Docker-desktop graphical interface." width="100%" />
<p class="caption">
Figure 2.1: Docker-desktop graphical interface.
</p>
</div>
<p>Note that, in Figure <a href="installation-and-setup.html#fig:docker-desktop">2.1</a>, both the project and services icons are in green colour. If some of the services fails from running, either the service icon or the project icon appear in orange color (Figure <a href="installation-and-setup.html#fig:docker-fail">2.2</a>).</p>
<div class="figure"><span style="display:block;" id="fig:docker-fail"></span>
<img src="figures/docker_fail.png" alt="Docker-desktop graphical interface with shiny container not running." width="100%" />
<p class="caption">
Figure 2.2: Docker-desktop graphical interface with shiny container not running.
</p>
</div>
<p>You can also verify that docker containers are running correctly typing:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="installation-and-setup.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> ps</span></code></pre></div>
<p>If everything is working, you should see output similar to the following:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="installation-and-setup.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">CONTAINER</span> ID   IMAGE                          STATUS          PORTS</span>
<span id="cb7-2"><a href="installation-and-setup.html#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="ex">973bf939</span>       luislado/glosis-shiny:latest   Up 2 minutes    0.0.0.0:3838-<span class="op">&gt;</span>3838/tcp</span>
<span id="cb7-3"><a href="installation-and-setup.html#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="ex">4fd00c73</span>       luislado/glosis-postgis:latest Up 2 minutes    0.0.0.0:5442-<span class="op">&gt;</span>5432/tcp</span></code></pre></div>
<p>If at any point you need to stop the services, use:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="installation-and-setup.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker-compose</span> down</span></code></pre></div>
<p>This command stops and removes the running containers, but your database data remains intact because it is stored in the <code>data/postgis</code> directory.</p>
</div>
<div id="accessing-the-services" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Accessing the Services<a href="installation-and-setup.html#accessing-the-services" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Once the containers are running, you can access the services as follows:</p>
<p>The PostgreSQL database is available at <code>localhost:5442</code>. You can connect to it using tools like <code>pgAdmin</code>, <code>DBeaver</code>, or directly from <code>R</code> using the <code>DBI package</code>.</p>
<p>The <code>glosis-shiny</code> app can be accessed from your web browser by navigating to:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="installation-and-setup.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">http://localhost:3838/</span></span></code></pre></div>
<p>This will open the graphical interface where you can upload and inject soil data into PostgreSQL from structured Excel files (Figure <a href="installation-and-setup.html#fig:glosis-shiny">2.3</a>).</p>
<div class="figure"><span style="display:block;" id="fig:glosis-shiny"></span>
<img src="figures/glosis_shiny.png" alt="Graphical interface for the `glosis-shiny' service." width="100%" />
<p class="caption">
Figure 2.3: Graphical interface for the `glosis-shinyâ service.
</p>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="glosis-database.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
