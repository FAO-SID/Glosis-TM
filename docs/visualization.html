<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Visualization | Soil Data Injection with Shiny and PostgreSQL</title>
  <meta name="description" content="<p>This is a bookdown with the instructions to use the Glosis-shiny app to inject data into postgres.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Visualization | Soil Data Injection with Shiny and PostgreSQL" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This is a bookdown with the instructions to use the Glosis-shiny app to inject data into postgres.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  <meta name="github-repo" content="FAO-SID/Glosis-TM" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Visualization | Soil Data Injection with Shiny and PostgreSQL" />
  
  <meta name="twitter:description" content="<p>This is a bookdown with the instructions to use the Glosis-shiny app to inject data into postgres.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  

<meta name="author" content="Luis Rodríguez Lado, Eloi Ribeiro, Marcos Angelini" />


<meta name="date" content="2025-03-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-injection-into-the-glosis-database.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> <strong>Introduction</strong></a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#system-requirements"><i class="fa fa-check"></i><b>1.1</b> System Requirements</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="installation-and-setup.html"><a href="installation-and-setup.html"><i class="fa fa-check"></i><b>2</b> <strong>Installation and Setup</strong></a>
<ul>
<li class="chapter" data-level="2.1" data-path="installation-and-setup.html"><a href="installation-and-setup.html#installing-docker-desktop"><i class="fa fa-check"></i><b>2.1</b> Installing Docker Desktop</a></li>
<li class="chapter" data-level="2.2" data-path="installation-and-setup.html"><a href="installation-and-setup.html#setting-up-the-glosis-database-and-shiny-app"><i class="fa fa-check"></i><b>2.2</b> Setting Up the GloSIS Database and Shiny App</a></li>
<li class="chapter" data-level="2.3" data-path="installation-and-setup.html"><a href="installation-and-setup.html#deploying-services"><i class="fa fa-check"></i><b>2.3</b> Deploying Services</a></li>
<li class="chapter" data-level="2.4" data-path="installation-and-setup.html"><a href="installation-and-setup.html#accessing-the-services"><i class="fa fa-check"></i><b>2.4</b> Accessing the Services</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="glosis-database.html"><a href="glosis-database.html"><i class="fa fa-check"></i><b>3</b> <strong>GloSIS Database</strong></a>
<ul>
<li class="chapter" data-level="3.1" data-path="glosis-database.html"><a href="glosis-database.html#glosis-database-configuration"><i class="fa fa-check"></i><b>3.1</b> GloSIS Database Configuration</a></li>
<li class="chapter" data-level="3.2" data-path="glosis-database.html"><a href="glosis-database.html#database-credentials"><i class="fa fa-check"></i><b>3.2</b> Database Credentials</a></li>
<li class="chapter" data-level="3.3" data-path="glosis-database.html"><a href="glosis-database.html#database-schema"><i class="fa fa-check"></i><b>3.3</b> Database Schema</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-preparation.html"><a href="data-preparation.html"><i class="fa fa-check"></i><b>4</b> <strong>Data preparation</strong></a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-preparation.html"><a href="data-preparation.html#understanding-the-xlsx-template"><i class="fa fa-check"></i><b>4.1</b> Understanding the XLSX Template</a></li>
<li class="chapter" data-level="4.2" data-path="data-preparation.html"><a href="data-preparation.html#plot-data-sheet"><i class="fa fa-check"></i><b>4.2</b> Plot Data Sheet</a></li>
<li class="chapter" data-level="4.3" data-path="data-preparation.html"><a href="data-preparation.html#specimen-data-sheet"><i class="fa fa-check"></i><b>4.3</b> Specimen Data Sheet</a></li>
<li class="chapter" data-level="4.4" data-path="data-preparation.html"><a href="data-preparation.html#procedures-sheet"><i class="fa fa-check"></i><b>4.4</b> Procedures Sheet</a></li>
<li class="chapter" data-level="4.5" data-path="data-preparation.html"><a href="data-preparation.html#codelist-sheet"><i class="fa fa-check"></i><b>4.5</b> Codelist Sheet</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-injection-into-the-glosis-database.html"><a href="data-injection-into-the-glosis-database.html"><i class="fa fa-check"></i><b>5</b> <strong>Data injection into the GloSIS database</strong></a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-injection-into-the-glosis-database.html"><a href="data-injection-into-the-glosis-database.html#create-a-new-database"><i class="fa fa-check"></i><b>5.1</b> Create a new database</a></li>
<li class="chapter" data-level="5.2" data-path="data-injection-into-the-glosis-database.html"><a href="data-injection-into-the-glosis-database.html#data-injection"><i class="fa fa-check"></i><b>5.2</b> Data injection</a></li>
<li class="chapter" data-level="5.3" data-path="data-injection-into-the-glosis-database.html"><a href="data-injection-into-the-glosis-database.html#delete-an-existing-database"><i class="fa fa-check"></i><b>5.3</b> Delete an existing database</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="visualization.html"><a href="visualization.html"><i class="fa fa-check"></i><b>6</b> <strong>Visualization</strong></a>
<ul>
<li class="chapter" data-level="6.1" data-path="visualization.html"><a href="visualization.html#view-data-on-the-dashboard"><i class="fa fa-check"></i><b>6.1</b> View Data on the Dashboard</a></li>
<li class="chapter" data-level="6.2" data-path="visualization.html"><a href="visualization.html#view-data-on-the-data-viewer-app"><i class="fa fa-check"></i><b>6.2</b> View data on the Data Viewer App</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Soil Data Injection with Shiny and PostgreSQL</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="visualization" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">6</span> <strong>Visualization</strong><a href="visualization.html#visualization" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Two visualization tools are included in this app: a <code>Dashboard</code> viewer and a <code>Data Viewer</code> application in Shiny. Both are designed to display data from the GloSIS database in a user-friendly format, and the <code>Data Viewer</code> also allows the export of soil data points to <code>.csv</code>, <code>.xlsx</code>, and the clipboard.</p>
<div id="view-data-on-the-dashboard" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> View Data on the Dashboard<a href="visualization.html#view-data-on-the-dashboard" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The first visualization tool is a dashboard generated in <code>.html</code> format. This dashboard is useful for verifying whether the data has been correctly updated in the database, identifying potential errors in positioning, and detecting data outliers. The file contains all selected data from the GloSIS database, which may result in a large file size depending on the number of records.</p>
<p>A <code>Create Dashboard</code> button appears after populating the GloSIS database with soil data (Figure <a href="visualization.html#fig:dashboardcreate">6.1</a>).</p>
<div class="figure"><span style="display:block;" id="fig:dashboardcreate"></span>
<img src="figures/dashboard_create.png" alt="`Create Dashboard button` on the left panel of the data injection app." width="100%" />
<p class="caption">
Figure 6.1: <code>Create Dashboard button</code> on the left panel of the data injection app.
</p>
</div>
<p>Clicking this button generates a <code>.html</code> file stored in the <code>init-scripts</code> folder within the working directory, using the same name as the database. The application then renders the file, and a new button,<code>Go to Dashboard</code>, will appear (Figure <a href="visualization.html#fig:dashboardgoto">6.2</a>).</p>
<div class="figure"><span style="display:block;" id="fig:dashboardgoto"></span>
<img src="figures/dashboard_goto.png" alt="`Go to Dashboard` button in &lt;span style='color:green;'&gt;green&lt;/span&gt; color." width="100%" />
<p class="caption">
Figure 6.2: <code>Go to Dashboard</code> button in <span style="color:green;">green</span> color.
</p>
</div>
<p>Clicking this button opens a <code>.html</code>format file in a new tab displaying soil data in three sections (Figure <a href="visualization.html#fig:dashboard1">6.3</a>):</p>
<ul>
<li><strong>Location</strong> – Contains details about the position of the soil data points.<br />
</li>
<li><strong>Attributes</strong> – Data on soil properties.<br />
</li>
<li><strong>Boxplot</strong> – Data with value bars showing the distribution of soil properties across profiles and depths for quick visual comparisons.</li>
</ul>
<div class="figure"><span style="display:block;" id="fig:dashboard1"></span>
<img src="figures/dashboard1.png" alt="Visualization of the soil data in the dashboard.." width="100%" />
<p class="caption">
Figure 6.3: Visualization of the soil data in the dashboard..
</p>
</div>
<p>Tables and the map are internally linked, allowing users to select specific soils either on the map or in the tables, with their location and attributes automatically filtered. The <code>Make a selection</code> button on the map can be used for this task when selecting directly from the map (Figure <a href="visualization.html#fig:dashboard4">6.4</a>).</p>
<div class="figure"><span style="display:block;" id="fig:dashboard4"></span>
<img src="figures/dashboard4.png" alt="Boxplot visualization of filtered soil data attributes." width="100%" />
<p class="caption">
Figure 6.4: Boxplot visualization of filtered soil data attributes.
</p>
</div>
</div>
<div id="view-data-on-the-data-viewer-app" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> View data on the Data Viewer App<a href="visualization.html#view-data-on-the-data-viewer-app" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The second visualization tool is accessible via the <code>Go to Data Viewer</code> button (Figure <a href="visualization.html#fig:viewer">6.5</a>) at the bottom of the <code>glosis-shiny</code> app. Clicking this button opens a new tab (Figure <a href="visualization.html#fig:viewer">6.5</a>) with a dropdown menu listing available databases. These databases are those previously created within the <code>glosis-shiny</code> app. The button <code>Go to GloSIS database</code> brings you back to the <code>glosis-shiny</code> app for data injection.</p>
<div class="figure"><span style="display:block;" id="fig:viewer"></span>
<img src="figures/viewer.png" alt="Visualization app." width="100%" />
<p class="caption">
Figure 6.5: Visualization app.
</p>
</div>
After selecting a database, clicking <code>Connect</code> displays the soil data both in a tabular format and as a map showing the locations of soil samples (Figure <a href="visualization.html#fig:viewer2">6.6</a>).
<div class="figure"><span style="display:block;" id="fig:viewer2"></span>
<img src="figures/viewer2.png" alt="Visualization app showing soil data from the selected database." width="100%" />
<p class="caption">
Figure 6.6: Visualization app showing soil data from the selected database.
</p>
</div>
<p>Similar to the dashboard, this tool is designed primarily for data verification and correction. In this app, soil data can be exported to other file formats.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-injection-into-the-glosis-database.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
